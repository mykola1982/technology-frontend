"use strict";(self.webpackChunktechnology=self.webpackChunktechnology||[]).push([[50],{6050:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t=r(1413),a=r(3433),c=r(4165),i=r(5861),o=r(9439),s=r(2791),u=r(7689),l=r(5206),d=r(8870),f=r(6151),h=r(890),x=r(3239),p=r(3372),m=r(2002),Z=r(7178),v=r(8965),g=r(7044),j=r(698),b=r(4994),w=r(184),k=function(e){var n=e.value,r=e.onChange;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(b.Z,{id:"filled-search",label:"\u041f\u043e\u0448\u0443\u043a \u0434\u0435\u0442\u0430\u043b\u0456",type:"search",variant:"outlined",name:"filter",sx:{width:"300px"},value:n,onChange:r})})},y=r(1087),S=r(4852),C=r(3400),P=r(2419),D=function(e){var n=e.product,r=e.index,t=e.onSelectProduct,a=e.location,c=n._id,i=n.name,o=n.number;return(0,w.jsxs)(S.ZP,{sx:{justifyContent:"space-between",borderBottom:"1px solid",gap:8},children:[(0,w.jsxs)(d.Z,{to:"/products/".concat(c),state:{from:a},component:y.rU,sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit",maxWidth:"260px",flexGrow:"1"},children:[(0,w.jsxs)(h.Z,{variant:"body1",mr:1,children:[r+1,"."]}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{variant:"body2",sx:{overflowWrap:"break-word"},children:i}),(0,w.jsx)(h.Z,{variant:"body2",sx:{overflowWrap:"break-word"},children:o})]})]}),(0,w.jsx)(C.Z,{"aria-label":"add to order list",size:"medium",onClick:function(){t(c)},children:(0,w.jsx)(P.Z,{fontSize:"medium",sx:{color:"#1976d2"}})})]})},z=r(493),q=function(e){var n=e.products,r=e.onDeleteProduct,t=e.onOpenModalOnUpdate,a=e.onSelectProduct,c=e.location;return(0,w.jsx)(z.Z,{sx:{width:"100%",maxWidth:360,position:"relative",overflow:"auto",maxHeight:"75vh","& ul":{padding:0}},children:n.map((function(e,n){return(0,w.jsx)(D,{index:n,product:e,onDeleteProduct:r,onOpenModalOnUpdate:t,onSelectProduct:a,location:c},e._id)}))})},A=r(9281),O=r(5527),W=r(9836),I=r(6890),F=r(5855),L=r(8745),_=r(3382),U=r(383),H=r(2666),T=function(e){var n=e.products,r=e.onDeleteProductFromOrder;return(0,w.jsx)(A.Z,{component:O.Z,children:(0,w.jsxs)(W.Z,{sx:{minWidth:650},size:"small",children:[(0,w.jsx)(I.Z,{children:(0,w.jsxs)(F.Z,{sx:{position:"sticky",top:0,zIndex:1,background:"#fff"},children:[(0,w.jsx)(L.Z,{align:"center",children:"\u2116 \u043f.\u043f."}),(0,w.jsx)(L.Z,{align:"center",children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,w.jsx)(L.Z,{align:"center",children:"\u041a\u0456\u043b.(\u0448\u0442.)"}),(0,w.jsx)(L.Z,{align:"center",children:"\u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b"}),(0,w.jsx)(L.Z,{align:"center",children:"\u0412\u0430\u0433\u0430(\u043a\u0433.)"}),(0,w.jsx)(L.Z,{align:"center",children:"\u041d\u043e\u0440\u043c\u0430(\u043a\u0433.)"}),(0,w.jsx)(L.Z,{align:"center",children:"Ho\u0440\u043c\u0430(\u0432 \u0447\u0430\u0441\u0442. \u043b\u0438\u0441\u0442\u0430) "}),(0,w.jsx)(L.Z,{align:"center",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})}),(0,w.jsx)(_.Z,{children:n.map((function(e,n){var t=e._id,a=e.name,c=e.number,i=e.reserved,o=e.weight,s=e.quantity,u=e.material,l=u.sheet,f=u.thickness;return(0,w.jsxs)(F.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,w.jsx)(L.Z,{align:"center",children:n+1}),(0,w.jsx)(L.Z,{align:"left",children:(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{variant:"body2",sx:{overflowWrap:"break-word"},children:a}),(0,w.jsx)(h.Z,{variant:"body2",sx:{overflowWrap:"break-word"},children:c})]})}),(0,w.jsx)(L.Z,{align:"center",children:i}),(0,w.jsxs)(L.Z,{align:"center",children:[e.material.thickness,"x",e.material.sheet]}),(0,w.jsx)(L.Z,{align:"center",children:o}),(0,w.jsx)(L.Z,{align:"center",children:(0,H.s)(s,l,f)}),(0,w.jsx)(L.Z,{align:"center",children:(1/e.quantity).toFixed(5)}),(0,w.jsx)(L.Z,{align:"center",children:(0,w.jsx)(C.Z,{"aria-label":"delete",size:"medium",sx:{color:"#1976d2"},onClick:function(){return r(t)},children:(0,w.jsx)(U.Z,{fontSize:"medium"})})})]},t)}))})]})})},N=r(2331),R=r(8096),E=function(e){var n=e.onSubmit,r=e.onClose,t=e.product;return(0,w.jsxs)(R.Z,{id:"quantityProduct",variant:"standard",component:"form",onSubmit:function(e){e.preventDefault();var a=e.currentTarget,c=a.elements.reserved.value;n(c,t),r(),a.reset()},sx:{display:"flex",gap:"12px",flexDirection:"column",width:"100%"},children:[(0,w.jsx)(h.Z,{variant:"h6",component:"p",align:"center",sx:{mb:2},children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0435\u0439"}),(0,w.jsx)(b.Z,{autoFocus:!0,type:"number",name:"reserved",variant:"outlined",label:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0435\u0439, \u0448\u0442.",inputProps:{min:"1"},defaultValue:"1"}),(0,w.jsx)(f.Z,{type:"submit",variant:"contained",size:"large",children:"OK"})]})},G=r(8463),J=r(4717),M=function(){var e=(0,s.useState)([]),n=(0,o.Z)(e,2),r=n[0],b=n[1],y=(0,s.useState)(""),S=(0,o.Z)(y,2),C=S[0],P=S[1],D=(0,s.useState)(!1),z=(0,o.Z)(D,2),A=z[0],O=z[1],W=(0,s.useState)((function(){var e=localStorage.getItem("selectedProducts");return null!==e&&""!==e?JSON.parse(e):[]})),I=(0,o.Z)(W,2),F=I[0],L=I[1],_=(0,s.useState)(null),U=(0,o.Z)(_,2),H=U[0],R=U[1],M=(0,s.useState)(!1),V=(0,o.Z)(M,2),X=V[0],B=V[1],K=(0,s.useState)(!1),Q=(0,o.Z)(K,2),Y=Q[0],$=Q[1],ee=(0,u.TH)(),ne=(0,u.s0)(),re=(0,J.a)().user,te=function(){B(!1)},ae=function(){$(!1)};(0,s.useEffect)((function(){function e(){return(e=(0,i.Z)((0,c.Z)().mark((function e(){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,m.C5();case 4:n=e.sent,r=n.data,b(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u043d\u043e\u0432\u0443...");case 12:return e.prev=12,O(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){localStorage.setItem("selectedProducts",JSON.stringify(F))}),[F]);var ce=function(){var e=(0,i.Z)((0,c.Z)().mark((function e(n){var r,t,i,o,s,u,d,f,h,x;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,t=n.number,i=n.weight,o=n.quantity,s=n.workshop,u=n.thickness,d=n.sheet,f={name:r,number:t,weight:i,quantity:o,workshop:s,material:{thickness:u,sheet:d}},e.prev=2,e.next=5,m.s2(f);case 5:h=e.sent,x=h.data,console.log(x),b((function(e){return[x].concat((0,a.Z)(e))})),l.Am.success("\u0414\u0435\u0442\u0430\u043b\u044c  ".concat(r,"-").concat(t," \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u0430 \u0434\u043e \u0441\u043f\u0438\u0441\u043a\u0443")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),409===e.t0.response.status?l.Am.error("\u0414\u0435\u0442\u0430\u043b\u044c \u0437 \u0434\u0435\u0446\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c  ".concat(t," \u0432\u0436\u0435 \u0454 \u0432 \u0441\u043f\u0438\u0441\u043a\u0443")):l.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u043d\u043e\u0432\u0443...");case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=C.toLowerCase();return r.filter((function(n){var r;return n.name.toLowerCase().includes(e)||(null===(r=n.number)||void 0===r?void 0:r.toLowerCase().startsWith(e))}))}(),oe=function(){var e=(0,i.Z)((0,c.Z)().mark((function e(n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user:re.name,products:n.map((function(e){return{name:e.name,number:e.number,weight:e.weight,quantity:e.quantity,material:e.material,reserved:e.reserved}})),materials:(0,v.ei)(n)},e.prev=1,e.next=4,Z.X6(r);case 4:localStorage.removeItem("selectedProducts"),l.Am.success("\u0414\u0435\u0442\u0430\u043b\u0456 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u0456 \u0432 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0430 \u0440\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043e\u043a \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0443."),ne("/orders"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l.Am.error("\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043f\u0440\u043e\u0431\u0443\u0439 \u0437\u043d\u043e\u0432\u0443...");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(g.p,{children:[(0,w.jsxs)(d.Z,{sx:{width:"380px",borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",mt:10,mb:6,p:1,pt:3,backgroundColor:"#f5f5f5",boxShadow:"0 0 8px 0 rgba(0,0,0,.3)"},children:[(0,w.jsx)(f.Z,{variant:"contained",size:"large",startIcon:(0,w.jsx)(p.Z,{}),onClick:function(){B(!0)},sx:{width:"300px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438 \u0434\u0435\u0442\u0430\u043b\u044c"}),(0,w.jsx)(k,{value:C,onChange:function(e){var n=e.currentTarget.value;P(n)}}),(0,w.jsx)(h.Z,{variant:"h5",sx:{fontWeight:700},children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u0442\u0430\u043b\u0435\u0439"}),(0,w.jsxs)(d.Z,{children:[r.length>0&&(0,w.jsxs)(h.Z,{variant:"body1",align:"center",children:["\u0412\u0441\u044c\u043e\u0433\u043e \u0432 \u0431\u0430\u0437\u0456 - ",r.length," \u0434\u0435\u0442."]}),C&&(0,w.jsxs)(h.Z,{variant:"body1",align:"center",children:["\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0437\u0431\u0456\u0433\u0456\u0432 - ",ie.length]})]}),A&&(0,w.jsx)(x.Z,{size:80,sx:{mt:"auto",mb:"auto"}}),r&&(0,w.jsx)(q,{products:ie,onSelectProduct:function(e){var n=r.find((function(n){return n._id===e})),t=n._id,a=n.name,c=n.number;F.some((function(e){return e._id===t}))?l.Am.warn("\u0414\u0435\u0442\u0430\u043b\u044c ".concat(a,"- ").concat(c," \u0432\u0436\u0435 \u0454 \u0432 \u0441\u043f\u0438\u0441\u043a\u0443 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f ")):(R(n),$(!0))},location:ee})]}),(0,w.jsxs)(d.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},borderRadius:4,flexDirection:"column",alignItems:"center",gap:"12px",mt:10,mb:6,p:1,backgroundColor:"#f5f5f5",boxShadow:"0 0 8px 0 rgba(0,0,0,.3)"},children:[(0,w.jsx)(T,{products:F,onDeleteProductFromOrder:function(e){L((function(n){return n.filter((function(n){return n._id!==e}))}))}}),(0,w.jsx)(f.Z,{variant:"contained",size:"large",disabled:F.length<=0,onClick:function(){oe(F)},children:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"})]})]}),(0,w.jsx)(N.q,{open:X,onClose:te,children:(0,w.jsx)(j.o,{onSubmit:ce,onClose:te})}),(0,w.jsx)(G.c,{open:Y,onClose:ae,children:(0,w.jsx)(E,{onClose:ae,onSubmit:function(e,n){var r=(0,t.Z)((0,t.Z)({},n),{},{reserved:e});L((function(e){return[].concat((0,a.Z)(e),[r])})),R(null)},product:H})})]})}},7178:function(e,n,r){r.d(n,{H:function(){return o},Lw:function(){return l},X6:function(){return s},cV:function(){return u},zN:function(){return i}});var t=r(4165),a=r(5861),c=r(1243);c.Z.defaults.baseURL="https://technology-backend.onrender.com/api";var i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("/orders");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("/orders/".concat(n));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.post("/orders",n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.delete("/orders/".concat(n));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.patch("/orders/".concat(n));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},838:function(e,n,r){function t(e){return new Date(e).toLocaleDateString("uk-UA")}r.d(n,{p:function(){return t}})},2654:function(e,n,r){function t(e){return new Date(e).toLocaleTimeString("uk-UA",{hours:!1})}r.d(n,{m:function(){return t}})},8965:function(e,n,r){r.d(n,{p6:function(){return c.p},mr:function(){return i.m},ei:function(){return a}});var t=r(1413);function a(e){return function(e){return e.map((function(e){return e.material})).reduce((function(e,n){return e.some((function(e){return e.thickness===n.thickness&&e.sheet===n.sheet}))||e.push((0,t.Z)({},n)),e}),[])}(e).map((function(n){var r=e.reduce((function(e,r){return n.thickness===r.material.thickness&&n.sheet===r.material.sheet&&(e+=1/r.quantity*r.reserved),e}),0);return(0,t.Z)((0,t.Z)({},n),{},{amount:r.toFixed(3)})}))}r(2666),r(8055),r(4412);var c=r(838),i=r(2654)}}]);
//# sourceMappingURL=50.244929d3.chunk.js.map